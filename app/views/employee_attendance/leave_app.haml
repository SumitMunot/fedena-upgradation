- # Fedena
- #Copyright 2010 Foradian Technologies Private Limited
- #
- #This product includes software developed at
- #Project Fedena - http://www.projectfedena.org/
- #
- #Licensed under the Apache License, Version 2.0 (the "License");
- #you may not use this file except in compliance with the License.
- #You may obtain a copy of the License at
- #
- #  http://www.apache.org/licenses/LICENSE-2.0
- #
- #Unless required by applicable law or agreed to in writing,
- #software distributed under the License is distributed on an
- #"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
- #KIND, either express or implied.  See the License for the
- #specific language governing permissions and limitations
- #under the License.
= stylesheet_link_tag("employee_attendance/leave_app.css")
#content-header
  = image_tag("  HR/leave-new.png")
  %h1= t('leave_application')
  %h3= t('pending_approval')
  #app-back-button
    = back_button
#page-yield
  - unless flash[:notice].nil?
    %p.flash-msg
      = flash[:notice]
  #leave-info
    %ul#item-list
      %li.listodd
        .item-name
          = t('name')
          \:
        = Employee.find(@applied_leave.employee_id).first_name
      %li.listeven
        .item-name
          = t('manager_name')
          \:
        - reporting_manager = Employee.find(@applied_leave.employee_id).reporting_manager_id
        = Employee.find(reporting_manager).first_name
      %li.listodd
        .item-name
          = t('leave_types')
          \:
        = @leave_type.name
      %li.listeven
        .item-name
          = t('half_day')
          \:
        - if @applied_leave.is_half_day == true
          = "Yes"
        - else
          = "No"
      %li.listodd
        .item-name
          = t('leave_start_date')
          \:
        = @applied_leave.start_date.strftime("%d %b, %Y")
      %li.listeven
        .item-name
          = t('leave_end_date')
          \:
        = @applied_leave.end_date.strftime("%d %b, %Y")
      %li.listodd
        .item-name
          = t('reason')
          \:
        = @applied_leave.reason
      %li.listeven
        .item-name
          = t('status')
          \:
        = "#{t('approved')}" if @applied_leave.approved == true and @applied_leave.viewed_by_manager == true
        = "#{t('denied')}" if @applied_leave.approved == false and @applied_leave.viewed_by_manager == true
        = "#{t('pending_approval')}" if @applied_leave.approved == false and @applied_leave.viewed_by_manager == false
    %span.reminder-link
      = link_to_remote "#{t('send_message')}",                                                                                                                                                                                       |
        :update => "reminder-form",                                                                                                                                                                                                  |
        :url => {:controller=>"reminders", :action => "pull_reminder_form", :id=>@applied_employee.id, :id2=>@employee.id,:id3=>@applied_leave.id} if @applied_leave.approved == false and @applied_leave.viewed_by_manager == false |
  #error-msg
  #reminder-form
#remark-form
